---
layout: post
title: "TIL screen"
categories: [ TIL ]
permalink: /TIL/:year/:month/:day/:title/
---

# 2021-01-24 {{page.title}}
&nbsp;  
오늘 한 일
    - 우분투 screen 연습

내일 할 일
    - django db, migration 건드리기 연습
    - django 정참조, 역참조 연습하기

screen은 그냥 화면 분할하는 데 쓰려고 설치한 거였는데... 이게 또 하나의 vim이 된 기분...
처음 쓰는 마당에 원하는 기능만 쏙 골라 외우기는 어려워서 일단 다 해보고 있는데, 이모저모 자잘한 오류까지 더해져서 혼란스럽다. 마우스로는 스크롤도 안 되고 화면 분할은 마음처럼 안 된다. 블로그 글 쓰는 내내 한탄과 멘붕의 연속이다.
더군다나 이 screen을 실행하고 있는 동안엔 neovim 설정해둔 것도 살짝 이상하다. 화면 색이 좀 반전된 것 마냥 위아랫줄과 커서 위치만 기본 터미널 색이다. 가장 큰 문제는 명령모드와 insert 모드 전환이 원활하지 못하다는 거. esc와 i를 어떨 땐 한 번 눌러도 안 된다. 내 추측이지만 한글입력 상태일 때 이런 현상이 발생하는 거 같다. 그리고 vi으로 파일 수정하고 탈출했는데 터미널 상에서 vi로 수정하던 파일이 걍 보인다..ㅋㅋ... cat으로 띄운거마냥... 
한글 입력 상태에서는 단축키도 제대로 안 먹는다. ctrl + a는 괜찮은데 그 뒤에 치는 건 반드시 영어여야 된다. 한글이면 그냥 타자 입력으로 들어간다... 바로 한영키 누르고 단축키 치면 먹히긴 한다. 이럴 땐 오히려 ctrl + a를 한 번 더 누르면 안 된다. ctrl + a, a로 인식한다. 
힘들다... 동근님이 쓰고 있다는 terminator로 갈아타야 될지...

screen -S <세션명> 으로 시작
screen -ls 세션 목록 보기
screen -r <세션명> detach 상태인 세션 attach로 만들고 접속하기
screen -x <세션명> attach 상태인 세션 접속하기
screen -d <세션명> 해당 세션 detach 상태로 만듦. 근데 이거 해봤을 때 오류났는지 해당 세션 말고 다른 세션이 목록에서 사라짐... 진짜 치명적이다.

screen을 실행한 세션 안에서의 단축키는 ctrl + a 를 기본으로 깔고 있다. 이 아래의 단축키는 ctrl + a를 누른 다음에 손 떼고 그 다음에 치는 단축키이다.
한 개의 세션 안에서 여러개의 창을 만들 수 있고, 이 창들을 하나의 세션 터미널 화면을 분할하여 여러개를 띄울 수 있다.
w 창 목록 확인. 터미널 하단에 몇초간 나온다.
c 새로운 창 생성.
창 목록에서 확인한 번호를 누르면 지금 창에서 해당 창으로 변경된다.
a 이전 창으로 이동.
n 다음 창으로 이동.

분할은 하나의 터미널을 가로, 세로로 쪼갤 수 있는데, 분할한 다음 생긴 화면이 바로 뭔가 칠 수 있는 터미널은 아니다. 자리는 만들어주는 느낌이라 일단 분할 화면으로 커서를 옮긴 다음 c로 새 창을 만들든 창 번호로 해당 창을 띄우든 해서 거기다가 창을 넣어줘야 된다.
shift + s 가로로 분할.
shift + \ 세로로 분할.
tab 분할 화면을 시계방향으로 돌며 커서를 옮김
shift + x 현재창 닫기. 잘못 눌러서 소문자 x만 누르면 완전 다른 기능임(창 잠그기).
shift + q 현재창만 남기고 다 닫기. 소문자 q만 누르면 완전 다른 기능임(창 잠금 해제).
esc 스크롤모드. 이 상태에서 방향키 움직이면 줄 단위로 오르내릴 수 있고 PgUp과 PgDn 버튼은 지금 창 크기의 페이지 단위로 움직인다.
스크롤 모드에서 탈출하는 법을 못 찾았다... 스크롤 모드 상태에서 엔터 한 세네번 치면 다시 쉘로 커서가 돌아오고 스크롤 모드가 풀리긴 하는데 이게 엔터가 단축키인지는 모르겠다. 왜냐면 엔터 말고 다른 키.. d나 s같은 거도 한 세번 치면 스크롤 모드가 풀려서. 아무 키를 치는 건 아닌 거 같다. a를 여러번 쳐봤는데 뭔 append 옵션만 오락가락했다.

쉘에 ctrl+a 없이  exit만 치면 해당 창을 끝낸다. 만일 그게 세션의 마지막 창이라면 screen 자체를 끝내버려서 모든 세션이 다 사라진다.
d screen 종료 안 하고 세션 빠져나가기. screen이 종료되거나 해당 세션이 detach 상태가 되는 건 아니고 screen만 빠져나간다.
