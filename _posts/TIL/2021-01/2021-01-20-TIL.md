---
layout: post
title: "TIL db django"
categories: [ TIL ]
permalink: /TIL/:year/:month/:day/:title/
---

# 2021-01-20 {{page.title}}
&nbsp;  
오늘 한 일
    - 우분투 한영 전환 설정하기
    - 스타벅스 음료 db 모델링 리뷰받고 수정
    - 리눅스, django 세션 듣기

내일 할 일
    - 스타벅스 음료 db 모델링 블로그 글 쓰기
    - 스타벅스 모델링 수정본 기반으로 django 모델 만들기
    - git 블로그 글 쓰기

어제 우분투를 설치하고 나니 윈도우의 시간 설정이 바뀌어 있었다. 그리고 그 상태에서 TIL을 push하니 잔디가 안 깔렸다. 윈도우에서 시간 설정을 다시 하고 push하니 되었다. 오늘 우분투에서 타임존 관련 설정을 다시 해줬는데 그 후 윈도우로 돌아오니 다시 이상하게 바뀌어 있었다... 오늘 TIL은 무사히 한 번에 들어가길 바란다. 윈도우 시간 설정을 다시 해주고 우분투 한영 전환도 마쳤다. 한영 전환은 아직 문제 없다.
[우분투 타임존, 한영 전환 설정할 때 참고한 링크](https://ilcm96.blogspot.com/2019/11/1810-3.html)  

페이지는 기획따라 변하지만 DB는 오래 가니까 DB 모델링을 할 땐 페이지보다는 데이터간의 관계 그 자체에 집중해야 된다는 말이 인상깊었다.
음료 - 영양정보 관계를 주로 어떤 경우에 N:N으로 설정하는지와 1:1으로 설정하는지에 대해 설명을 들었다. 음료 배합 비율이 잘 변하지 않아 영양정보의 변동 가능성이 낮을 때는 영양정보 전체를 한 세트로 보아 1:1 관계로 보는 쪽을 선호한다. 기존에 제출한 모델은 N:N으로 했는데, 1:1로 수정하는 게 더 적합할 것 같다. 그리고 난 테이블을 너무 쪼개는 경향이 있는 거 같다. 다른 사람들의 모델링을 많이 봐야될 거 같다.
이름 지을 때 테이블은 소문자+복수, column은 소문자+언더바+명확히.
info, data는 피하자. 범용되거나 포괄적이다.
새 테이블로 나누는 것도 리소스 소모다. 1:1 관계인 건 일단 한 테이블에 다 넣어놓고 나서 그 안에서 좀 다른 범주인 걸 다른 테이블로 나눈다. e.g. 신상정보 / 배송정보 / 결제정보
url의 type은 varchar(1000) ~ varchar(2000) 정도 추천.
단위까지 같이 입력될 곳이면 varchar로. 숫자만 입력받을 거라면 단위 column을 따로 만들어야 된다.  

django에서 새로 배운 것
정참조, 역참조와 이를 이용해 연결된 테이블을 쿼리셋으로 뽑아내는 _set method
models.py에서 1:1 관계는 one to one에 해당하는 field가 따로 있다. 1:N은 일반 foreign key로 하고 N:N은 중간테이블을 만들어서 거기에서 두 테이블을 foreign key로 잡아준다. foreign key의 param으로 다른 테이블을 줄 때 그냥 넣지 말고 따옴표를 붙여서 문자열 형태로 넣어주면 class 선언 순서와 상관 없이 넣을 수 있다! 행복
+) 모델 내 필드의 param으로 helptext를 넣으면 나중에 설명 다 띄워주는 기능이 있다고 한다. django는 알면 알 수록 진짜.. 사용자 편의성 엄청 좋게 해둔듯